<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta name="generator" content="Hugo 0.89.0" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="非線形最適化を用いてロケット制御問題を解くチュートリアルです">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Rocket Control" />
<meta property="og:description" content="非線形最適化を用いてロケット制御問題を解くチュートリアルです" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://pallahaxi.github.io/calender_deriven_development/docs/jump/Rocket_Control/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2021-05-13T12:06:47+09:00" />
<meta property="article:modified_time" content="2021-05-17T09:40:23+09:00" />

<title>Rocket Control | Juliaで数理最適化</title>
<link rel="manifest" href="https://pallahaxi.github.io/calender_deriven_development/manifest.json">
<link rel="icon" href="https://pallahaxi.github.io/calender_deriven_development/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="https://pallahaxi.github.io/calender_deriven_development/book.min.e935e20bd0d469378cb482f0958edf258c731a4f895dccd55799c6fbc8043f23.css">
<script defer src="https://pallahaxi.github.io/calender_deriven_development/en.search.min.c6d4c58863b05f1d64f96f7d02fe18a4474ef323d863495f563f5b06fcfdaafe.js"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="https://pallahaxi.github.io/calender_deriven_development/"><span>Juliaで数理最適化</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-99b7fb9e4c50b6f8377df9e8c3a6819e" class="toggle"  />
    <label for="section-99b7fb9e4c50b6f8377df9e8c3a6819e" class="flex justify-between">
      <a href="https://pallahaxi.github.io/calender_deriven_development/docs/opt_100/" class="">Opt 100</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://pallahaxi.github.io/calender_deriven_development/docs/opt_100/maxflow/" class="">最大流問題</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://pallahaxi.github.io/calender_deriven_development/docs/opt_100/k_shortest_paths/" class="">最短路の列挙</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-29da691489df965cd95d89e555abeb44" class="toggle" checked />
    <label for="section-29da691489df965cd95d89e555abeb44" class="flex justify-between">
      <a href="https://pallahaxi.github.io/calender_deriven_development/docs/jump/" class="">JuMPチュートリアル</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://pallahaxi.github.io/calender_deriven_development/docs/jump/n_queens/" class="">N-Queens</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://pallahaxi.github.io/calender_deriven_development/docs/jump/the_Diet_problem/" class="">The Diet Problem</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://pallahaxi.github.io/calender_deriven_development/docs/jump/Sudoku/" class="">Sudoku</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://pallahaxi.github.io/calender_deriven_development/docs/jump/Rocket_Control/" class=" active">Rocket Control</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="https://mikiokubo.github.io/opt100/index.html" target="_blank" rel="noopener">
        Python言語による実務で使える100&#43;の最適化問題
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="https://pallahaxi.github.io/calender_deriven_development/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Rocket Control</strong>

  <label for="toc-control">
    
    <img src="https://pallahaxi.github.io/calender_deriven_development/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#rocket-control">Rocket Control</a>
      <ul>
        <li>
          <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#state-and-control">State and Control</a></li>
            <li><a href="#dynamics">Dynamics</a></li>
          </ul>
        </li>
        <li><a href="#constants">Constants</a></li>
        <li><a href="#decision-variables">Decision variables</a></li>
        <li><a href="#objective">Objective</a></li>
        <li><a href="#initial-conditions">Initial conditions</a></li>
        <li><a href="#forces">Forces</a></li>
        <li><a href="#dynamics-1">Dynamics</a></li>
        <li><a href="#display-results">Display results</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="rocket-control">
  Rocket Control
  <a class="anchor" href="#rocket-control">#</a>
</h1>
<p>Originally Contributed by: Iain Dunning</p>
<p>本チュートリアルでは非線形最適化を用いてロケット制御問題をどのように解くかを解説します。
この「ロケット制御問題」は<a href="https://www.mcs.anl.gov/~more/cops/cops3.pdf">COPS3</a>の10章にある「Goddard Rocket」として紹介されている問題と同じパラメータを利用します。</p>
<p>本問題のゴールは「垂直に打ち上げられたロケットの最高高度を最大化」することです。</p>
<p>本チュートリアルの設定ではコントロール可能な1パラメータとして「ロケットの推進力」があり、ロケットの質量・燃料の消費量(消費率)・重力・空気抵抗などを考慮しつつ最高高度の最大化を目指します。</p>
<p>ロケット制御に含まれるパラメータや詳細については<a href="https://www.mcs.anl.gov/~more/cops/cops3.pdf">CPOS3のPDF</a>を参照してください。</p>
<h3 id="overview">
  Overview
  <a class="anchor" href="#overview">#</a>
</h3>
<p>ロケット制御のモデル化を記述するにあたり、刻々と変化する時間を固定値 
<link rel="stylesheet" href="https://pallahaxi.github.io/calender_deriven_development/katex/katex.min.css" />
<script defer src="https://pallahaxi.github.io/calender_deriven_development/katex/katex.min.js"></script>
<script defer src="https://pallahaxi.github.io/calender_deriven_development/katex/auto-render.min.js" onload="renderMathInElement(document.body);"></script><span>
  \(n\)
</span>
 で離散化させタイムステップとして取り扱います。</p>
<p>つまり離散化する固定値 <span>
  \(n\)
</span>
 と観測する最終時間 <span>
  \(t_f\)
</span>
 を用いることで、 <span>
  \(t_f = n \cdot \Delta t\)
</span>
 と記述します。</p>
<h3 id="state-and-control">
  State and Control
  <a class="anchor" href="#state-and-control">#</a>
</h3>
<p>ロケットの状態を記載するため下記の3つの変数を導入します。</p>
<ul>
<li><span>
  \(v\)
</span>
 : 速度</li>
<li><span>
  \(h\)
</span>
 : 高度</li>
<li><span>
  \(m\)
</span>
 : ロケットと残燃料を合わせた質量</li>
</ul>
<p>また本チュートリアルでコントロール可能な1パラメータである推進力を <span>
  \(T\)
</span>
 とします。</p>
<p>さらに本問題で最大化したい高度を <span>
  \(h(t_f)\)
</span>
 とします。</p>
<h3 id="dynamics">
  Dynamics
  <a class="anchor" href="#dynamics">#</a>
</h3>
<p>ロケット制御を考える上で力学で用いる運動方程式から、下記の3方程式を得ます。</p>
<ul>
<li>上昇率: <span>
  \(h^\prime = v\)
</span>
</li>
<li>加速度: <span>
  \(v^\prime = \frac{T - D(h,v)}{m} - g(h)\)
</span>
</li>
<li>質量の変化率: <span>
  \(m^\prime = -\frac{T}{c}\)
</span>
</li>
</ul>
<p>チュートリアルでは上記について説明が少なく、不親切だと思ったので補足します。<br>
今回鉛直上向きの1軸しか考えず、上昇率は鉛直上向きの単位時間あたりの移動距離を指すのでロケットの速度に他なりません。<br>
加速度については高校物理で習う運動方程式 <span>
  \(ma = F\)
</span>
 から得られます。ロケットに作用する力は鉛直上向きにロケット自身の推進力 <span>
  \(T\)
</span>
 が存在し、鉛直下向きに質量と重力加速度 <span>
  \(g(h)\)
</span>
 の積で得られる重力 <span>
  \(mg(h)\)
</span>
 と空気抵抗 <span>
  \(D(h, v)\)
</span>
 が存在します。つまり高校物理で習う運動方程式に合わせて記述すると <span>
  \(m v^\prime = T - D(h, v) - mg(h)\)
</span>
 となります。ここで <span>
  \(g(h)\)
</span>
 が高度 <span>
  \(h\)
</span>
 に依存するのは地球から離れるため重力加速度が小さくなるためです。また <span>
  \(D(h, v)\)
</span>
 は速度 <span>
  \(v\)
</span>
 に依存するのは高校物理で習う通りで、高度 <span>
  \(h\)
</span>
 に依存するのは高所では空気が薄くなるためです。<br>
最後の方程式では今回 <span>
  \(c\)
</span>
 を定数として最適化問題を解きます。つまり質量の変化率はロケットの推進力が比例関係にあることを指しており、質量と速度が同時に変化するロケットのような系を考えると自然と得られます。<br>
またここで導入した空気抵抗 <span>
  \(D(h, v)\)
</span>
 と重力加速度 <span>
  \(g(h)\)
</span>
 は下記の式に従います。
<span>
  \[\begin{aligned}
D(h,v) &amp;= D_c v^2 \exp\left[ -h_c \left( \frac{h-h(0)}{h(0)} \right) \right],\\
g(h) &amp;= g_0 \left( \frac{h(0)}{h} \right)^2
\end{aligned}\]
</span>
</p>
<p>地上での重力加速度 <span>
  \(g_0\)
</span>
 と高度の初期値 <span>
  \(h(0)\)
</span>
 と <span>
  \(D_c, h_c\)
</span>
 は定数として扱われます。</p>
<p>実際にコーディングに移ります。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia"><span style="color:#66d9ef">using</span> JuMP
<span style="color:#66d9ef">import</span> Ipopt
<span style="color:#66d9ef">import</span> Plots
</code></pre></div><p>それぞれパッケージのバージョンは</p>
<pre tabindex="0"><code>Ipopt v0.6.5
JuMP v0.21.8
Plots v1.14.0
</code></pre><p>を利用しています。</p>
<p>ソルバーとしてIpoptを使用し、JuMPのモデルを作成します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia">rocket <span style="color:#f92672">=</span> Model(Ipopt<span style="color:#f92672">.</span>Optimizer)
set_silent(rocket)
</code></pre></div><h2 id="constants">
  Constants
  <a class="anchor" href="#constants">#</a>
</h2>
<p><span>
  \(h(0) = m(0) = g_0 = 1\)
</span>
 の単位系をとることでこれまでの定式化の物理量を全て無次元に整理することができます。
今回はそれぞれ全パラメータにCOPS3の数値を用います。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia">h_0 <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>    <span style="color:#75715e"># Initial height</span>
v_0 <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>    <span style="color:#75715e"># Initial velocity</span>
m_0 <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>    <span style="color:#75715e"># Initial mass</span>
g_0 <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>    <span style="color:#75715e"># Gravity at the surface</span>

T_c <span style="color:#f92672">=</span> <span style="color:#ae81ff">3.5</span>  <span style="color:#75715e"># Used for thrust</span>
h_c <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span>  <span style="color:#75715e"># Used for drag</span>
v_c <span style="color:#f92672">=</span> <span style="color:#ae81ff">620</span>  <span style="color:#75715e"># Used for drag</span>
m_c <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.6</span>  <span style="color:#75715e"># Fraction of initial mass left at end</span>

c     <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span> <span style="color:#f92672">*</span> sqrt(g_0 <span style="color:#f92672">*</span> h_0)  <span style="color:#75715e"># Thrust-to-fuel mass</span>
m_f   <span style="color:#f92672">=</span> m_c <span style="color:#f92672">*</span> m_0              <span style="color:#75715e"># Final mass</span>
D_c   <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span> <span style="color:#f92672">*</span> v_c <span style="color:#f92672">*</span> m_0 <span style="color:#f92672">/</span> g_0  <span style="color:#75715e"># Drag scaling</span>
T_max <span style="color:#f92672">=</span> T_c <span style="color:#f92672">*</span> g_0 <span style="color:#f92672">*</span> m_0        <span style="color:#75715e"># Maximum thrust</span>

n <span style="color:#f92672">=</span> <span style="color:#ae81ff">800</span>    <span style="color:#75715e"># Time steps</span>
</code></pre></div><h2 id="decision-variables">
  Decision variables
  <a class="anchor" href="#decision-variables">#</a>
</h2>
<p>本問題での変数の定義域を定義します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia"><span style="color:#a6e22e">@variables</span>(rocket, <span style="color:#66d9ef">begin</span>
    Δt <span style="color:#f92672">≥</span> <span style="color:#ae81ff">0</span>, (start <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span>n) <span style="color:#75715e"># Time step</span>
    <span style="color:#75715e"># State variables</span>
    v[<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n] <span style="color:#f92672">≥</span> <span style="color:#ae81ff">0</span>            <span style="color:#75715e"># Velocity</span>
    h[<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n] <span style="color:#f92672">≥</span> h_0          <span style="color:#75715e"># Height</span>
    m_f <span style="color:#f92672">≤</span> m[<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n] <span style="color:#f92672">≤</span> m_0    <span style="color:#75715e"># Mass</span>
    <span style="color:#75715e"># Control variables</span>
    <span style="color:#ae81ff">0</span> <span style="color:#f92672">≤</span> T[<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n] <span style="color:#f92672">≤</span> T_max    <span style="color:#75715e"># Thrust</span>
<span style="color:#66d9ef">end</span>)
</code></pre></div><h2 id="objective">
  Objective
  <a class="anchor" href="#objective">#</a>
</h2>
<p>本問題の目的変数は高度 <span>
  \(h\)
</span>
 の最大化であり、下記のように設定します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia"><span style="color:#a6e22e">@objective</span>(rocket, Max, h[n])
</code></pre></div><h2 id="initial-conditions">
  Initial conditions
  <a class="anchor" href="#initial-conditions">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia">fix(v[<span style="color:#ae81ff">1</span>], v_0; force <span style="color:#f92672">=</span> true)
fix(h[<span style="color:#ae81ff">1</span>], h_0; force <span style="color:#f92672">=</span> true)
fix(m[<span style="color:#ae81ff">1</span>], m_0; force <span style="color:#f92672">=</span> true)
fix(m[n], m_f; force <span style="color:#f92672">=</span> true)
</code></pre></div><h2 id="forces">
  Forces
  <a class="anchor" href="#forces">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia"><span style="color:#a6e22e">@NLexpressions</span>(rocket, <span style="color:#66d9ef">begin</span>
    <span style="color:#75715e"># Drag(h,v) = Dc v^2 exp( -hc * (h - h0) / h0 )</span>
    drag[j <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n], D_c <span style="color:#f92672">*</span> (v[j]<span style="color:#f92672">^</span><span style="color:#ae81ff">2</span>) <span style="color:#f92672">*</span> exp(<span style="color:#f92672">-</span>h_c <span style="color:#f92672">*</span> (h[j] <span style="color:#f92672">-</span> h_0) <span style="color:#f92672">/</span> h_0)
    <span style="color:#75715e"># Grav(h)   = go * (h0 / h)^2</span>
    grav[j <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n], g_0 <span style="color:#f92672">*</span> (h_0 <span style="color:#f92672">/</span> h[j])<span style="color:#f92672">^</span><span style="color:#ae81ff">2</span>
    <span style="color:#75715e"># Time of flight</span>
    t_f, Δt <span style="color:#f92672">*</span> n
<span style="color:#66d9ef">end</span>)
</code></pre></div><h2 id="dynamics-1">
  Dynamics
  <a class="anchor" href="#dynamics-1">#</a>
</h2>
<p>上記で導入した方程式を各タイムステップでの制約式として扱います。具体的には台形法を用いて各タイムステップで積分した式を制約式とします。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia"><span style="color:#66d9ef">for</span> j <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span>n
    <span style="color:#75715e"># h&#39; = v</span>
    <span style="color:#75715e"># Rectangular integration</span>
    <span style="color:#75715e"># @NLconstraint(rocket, h[j] == h[j - 1] + Δt * v[j - 1])</span>
    <span style="color:#75715e"># Trapezoidal integration</span>
    <span style="color:#a6e22e">@NLconstraint</span>(rocket, h[j] <span style="color:#f92672">==</span> h[j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> <span style="color:#ae81ff">0.5</span> <span style="color:#f92672">*</span> Δt <span style="color:#f92672">*</span> (v[j] <span style="color:#f92672">+</span> v[j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>]))
    <span style="color:#75715e"># v&#39; = (T-D(h,v))/m - g(h)</span>
    <span style="color:#75715e"># Rectangular integration</span>
    <span style="color:#75715e"># @NLconstraint(</span>
    <span style="color:#75715e">#     rocket,</span>
    <span style="color:#75715e">#     v[j] == v[j - 1] + Δt *((T[j - 1] - drag[j - 1]) / m[j - 1] - grav[j - 1])</span>
    <span style="color:#75715e"># )</span>
    <span style="color:#75715e"># Trapezoidal integration</span>
    <span style="color:#a6e22e">@NLconstraint</span>(
        rocket,
        v[j] <span style="color:#f92672">==</span> v[j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span>
            <span style="color:#ae81ff">0.5</span> <span style="color:#f92672">*</span> Δt <span style="color:#f92672">*</span> (
                (T[j    ] <span style="color:#f92672">-</span> drag[j    ] <span style="color:#f92672">-</span> m[j    ] <span style="color:#f92672">*</span> grav[j    ]) <span style="color:#f92672">/</span> m[j    ] <span style="color:#f92672">+</span>
                (T[j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> drag[j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> m[j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">*</span> grav[j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>]) <span style="color:#f92672">/</span> m[j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>]
            )
    )
    <span style="color:#75715e"># m&#39; = -T/c</span>
    <span style="color:#75715e"># Rectangular integration</span>
    <span style="color:#75715e"># @NLconstraint(rocket, m[j] == m[j - 1] - Δt * T[j - 1] / c)</span>
    <span style="color:#75715e"># Trapezoidal integration</span>
    <span style="color:#a6e22e">@NLconstraint</span>(rocket, m[j] <span style="color:#f92672">==</span> m[j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> <span style="color:#ae81ff">0.5</span> <span style="color:#f92672">*</span> Δt <span style="color:#f92672">*</span> (T[j] <span style="color:#f92672">+</span> T[j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]) <span style="color:#f92672">/</span> c)
<span style="color:#66d9ef">end</span>
</code></pre></div><p>これまでに設計したモデルが完成したので、最適解を求める。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia">println(<span style="color:#e6db74">&#34;Solving...&#34;</span>)
status <span style="color:#f92672">=</span> optimize!(rocket)
</code></pre></div><h2 id="display-results">
  Display results
  <a class="anchor" href="#display-results">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia">println(<span style="color:#e6db74">&#34;Max height: &#34;</span>, objective_value(rocket))
</code></pre></div><pre tabindex="0"><code>Max height: 1.0128340648308016
</code></pre><p>可視化</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia"><span style="color:#66d9ef">function</span> my_plot(y, ylabel)
    <span style="color:#66d9ef">return</span> Plots<span style="color:#f92672">.</span>plot(
        (<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>n) <span style="color:#f92672">*</span> value<span style="color:#f92672">.</span>(Δt),
        value<span style="color:#f92672">.</span>(y)[<span style="color:#f92672">:</span>];
        xlabel <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Time (s)&#34;</span>,
        ylabel <span style="color:#f92672">=</span> ylabel,
    )
<span style="color:#66d9ef">end</span>

Plots<span style="color:#f92672">.</span>plot(
    my_plot(h, <span style="color:#e6db74">&#34;Altitude&#34;</span>),
    my_plot(m, <span style="color:#e6db74">&#34;Mass&#34;</span>),
    my_plot(v, <span style="color:#e6db74">&#34;Velocity&#34;</span>),
    my_plot(T, <span style="color:#e6db74">&#34;Thrust&#34;</span>);
    layout <span style="color:#f92672">=</span> (<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>),
    legend <span style="color:#f92672">=</span> false,
    margin <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>Plots<span style="color:#f92672">.</span>cm,
)
</code></pre></div><figure><img src="https://pallahaxi.github.io/calender_deriven_development/docs/jump/static/Rocket_Control/results.png"/>
</figure>

</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#rocket-control">Rocket Control</a>
      <ul>
        <li>
          <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#state-and-control">State and Control</a></li>
            <li><a href="#dynamics">Dynamics</a></li>
          </ul>
        </li>
        <li><a href="#constants">Constants</a></li>
        <li><a href="#decision-variables">Decision variables</a></li>
        <li><a href="#objective">Objective</a></li>
        <li><a href="#initial-conditions">Initial conditions</a></li>
        <li><a href="#forces">Forces</a></li>
        <li><a href="#dynamics-1">Dynamics</a></li>
        <li><a href="#display-results">Display results</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>

</html>












